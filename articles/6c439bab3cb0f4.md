---
title: "è©±é¡Œã®MCPã‚µãƒ¼ãƒãƒ¼ã‚’è‡ªä½œã—ã¦ã€è‡ªç„¶è¨€èªã§TestRailã‚’æ“ä½œã—ã¦ã¿ãŸ"
emoji: "ğŸ›¤ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["mcp", "testrail", "typescript"]
published: true
publication_name: "moneyforward"
---

ã“ã‚“ã«ã¡ã¯ã€‚ãƒ€ã‚¤ã®å¤§å†’é™ºã‚¬ãƒå‹¢ã®[bun913](https://x.com/bun7623514)ã¨ç”³ã—ã¾ã™ã€‚

ã¿ãªã•ã‚“ã¯MCPã¨ã„ã†å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã‚„DBã¨ã®é€£æºãªã©ã‚’æ¨™æº–åŒ–ã™ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ã”å­˜çŸ¥ã§ã™ã‹ï¼Ÿ

https://zenn.dev/cloud_ace/articles/model-context-protocol

ç§ã‚‚å…¨ç„¶çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§ã™ãŒã€ä»Šå›è‡ªç„¶è¨€èªã§ [TestRail](https://www.testrail.com/) ã¨ã„ã†ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœãªã©ã®ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã¨é€£æºã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã‚’è‡ªä½œã—ã¦ã¿ã¾ã—ãŸã€‚

https://github.com/bun913/mcp-testrail

## ãƒ‡ãƒ¢

éå¸¸ã«ç°¡å˜ã«ã„ã†ã¨ã€Claude Desktop ã‚„ Cursor ã®ã‚ˆã†ãªãƒ„ãƒ¼ãƒ«ã‹ã‚‰è‡ªç„¶è¨€èªã§ TestRail ã«å¯¾ã—ã¦æ“ä½œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

ä»Šã®æ™‚ç‚¹ã§ä»¥ä¸‹ã®ã‚ˆã†ãªæ“ä½œã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚
(4/6 è¿½è¨˜: åˆ¥é€”è¨˜äº‹ã«ã—ã¾ã™ãŒMCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ãƒ„ãƒ¼ãƒ«æ•°ã®åˆ¶é™ã«å¼•ã£ã‹ã‹ã£ã¦ã„ãŸãŸã‚ã€å‰Šæ¸›ã—ã¾ã—ãŸ)


| Category | Tools |
|----------|-------|
| **Projects** | `getProjects`, `getProject`, `addProject`, `updateProject`, `deleteProject` |
| **Suites** | `getSuites`, `getSuite`, `addSuite`, `updateSuite` |
| **Cases** | `getCase`, `getCases`, `addCase`, `updateCase`, `deleteCase`, `getCaseTypes`, `getCaseFields`, `copyToSection`, `moveToSection`, `getCaseHistory`, `updateCases` |
| **Sections** | `getSection`, `getSections`, `addSection`, `moveSection`, `updateSection`, `deleteSection` |
| **Runs** | `getRuns`, `getRun`, `addRun`, `updateRun`, `closeRun` |
| **Results** | `getResults`, `getResultsForCase`, `getResultsForRun`, `addResultForCase`, `addResultsForCases` |
| **Plans** | `getPlans` |
| **Milestones** | `getMilestones` |
| **Shared Steps** | `getSharedSteps` |

### æœŸå¾…ã—ã¦ã„ã‚‹ã“ã¨

- ã‚·ãƒ³ãƒ—ãƒ«ãªTestRailã®æ“ä½œ
    - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã®è©³ç´°èª¬æ˜ã€æ—¢å­˜ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…ã«å¯¾ã—ã¦è¶³ã‚Šãªã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãªã©ã‚’AIã¨ä¸€ç·’ã«è€ƒãˆã‚‹
    - è€ƒãˆãŸãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ãã®ã¾ã¾è‡ªç„¶è¨€èªã§æŒ‡ç¤ºã—ã¦TestRailã«ç™»éŒ²ã™ã‚‹
- ä»–ã®MCPã‚µãƒ¼ãƒãƒ¼ã¨ã®é€£æº
    - ä¾‹ãˆã° [Playwright-MCP](https://github.com/microsoft/playwright-mcp) ãªã©é€£æºã™ã‚‹ã“ã¨ã§ã€TestRailã«ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’æº–å‚™ã—ã¦ã€è‡ªç„¶è¨€èªã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã“ã¨ãªã©ãŒã§ããªã„ã‹æœŸå¾…ã—ã¦ã„ã¾ã™

### Cursor ã§ã®å®Ÿè¡Œä¾‹

- Projects ä¸€è¦§ã®å–å¾—

![Project list on Cursor](/images/mcp_testrail/cursorGetProjects.png)

Projectã®è©³ç´°æƒ…å ±ã‚’å–å¾—

![ProjectDetailedInfo](/images/mcp_testrail/CursorDetialedInfo.png)

### Claude Desktop ã§ã®å®Ÿè¡Œä¾‹

TestRail ã‹ã‚‰ Project ã®ä¸€è¦§ã®å–å¾—ã‚’æŒ‡ç¤ºã—ã¦ã¿ã¾ã™ã€‚

![Project list](/images/mcp_testrail/claudeJA.png)

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®è¿½åŠ ãªã©ã‚‚ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚ç§ãŒé›‘ã«æŒ‡ç¤ºã‚’ã—ã¦ã„ã‚‹ã®ã§ã€è‰²ã€…ã¨å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œã£ã¦ã„ã¾ã™ã€‚ã“ã®è¾ºã‚Šã¯ã¡ã‚ƒã‚“ã¨æŒ‡ç¤ºã‚’ã—ã¨ã‹ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã­ã€‚

![Add test case](/images/mcp_testrail/claudeAddTestCase.png)

## è‡ªä½œMCPã‚µãƒ¼ãƒãƒ¼ã®ä»•çµ„ã¿

ä»Šå›ä½œæˆã—ãŸMCPã‚µãƒ¼ãƒãƒ¼ã®ä»•çµ„ã¿ã¯ç°¡å˜ã«ã„ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```mermaid
graph TD
    A[AI ãƒ¢ãƒ‡ãƒ«<br>Claude] -->|MCP| B[MCP-TestRail ã‚µãƒ¼ãƒãƒ¼]
    
    subgraph "é€šä¿¡ãƒ¢ãƒ¼ãƒ‰"
        C[SSEãƒ¢ãƒ¼ãƒ‰<br>WebçµŒç”±] --> B
        D[Stdioãƒ¢ãƒ¼ãƒ‰<br>æ¨™æº–å…¥å‡ºåŠ›] --> B
    end
    
    B -->|HTTP API| E[TestRail API]
    E --> F[TestRail<br>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹]
    
    subgraph "ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ"
        G[Cursor] -->|SSE| C
        H[Claude Desktop] -->|Stdio| D
    end
    
    subgraph "è¨­å®š"
        I[.env ãƒ•ã‚¡ã‚¤ãƒ«] --> C
        J[JSON è¨­å®š] --> D
    end
```

### MCPã‚µãƒ¼ãƒãƒ¼ã¨ã¯

MCPï¼ˆModel Context Protocolï¼‰ã¯ã€AIãƒ¢ãƒ‡ãƒ«ã¨ãƒ„ãƒ¼ãƒ«ã‚’é€£æºã•ã›ã‚‹ãŸã‚ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚ã“ã®ã‚µãƒ¼ãƒãƒ¼ã¯ã€AIãƒ¢ãƒ‡ãƒ«ãŒTestRailã®APIã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ãƒ†ã‚¹ãƒˆç®¡ç†ã«é–¢é€£ã™ã‚‹æƒ…å ±ã‚’å–å¾—ã—ãŸã‚Šæ“ä½œã—ãŸã‚Šã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®2ç¨®é¡ã®é€šä¿¡ãƒ¢ãƒ¼ãƒ‰ã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚

#### 1. SSEãƒ¢ãƒ¼ãƒ‰ï¼ˆWebçµŒç”±ï¼‰

```typescript
// TestRail MCP Serverã®SSEã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
import { startServer } from "./server/server.js";

// SSEã‚µãƒ¼ãƒãƒ¼èµ·å‹•
startServer();
```

https://github.com/bun913/mcp-testrail/blob/60d228a3a299fda881e73d0de7a85fcd0677867f/src/server/server.ts#L49-L87

SSEãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€Expressã‚µãƒ¼ãƒãƒ¼ãŒHTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã—ã€Server-Sent Eventsï¼ˆSSEï¼‰ã‚’ä½¿ã£ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã‚’è¡Œã„ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã‚„Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚

ä»Šå›ã®å ´åˆ Cursor ã§ã¯ SSEãƒ¢ãƒ¼ãƒ‰ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚

![cursorConfig](/images/mcp_testrail/cursorConfig.png)

#### 2. Stdioãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨™æº–å…¥å‡ºåŠ›ï¼‰

```typescript
// Main execution
const main = async () => {
  try {
    console.error("Starting TestRail MCP Server (stdio mode)...");

    // Create and connect transport
    const transport = new StdioServerTransport();
    await server.connect(transport);

    console.error("TestRail MCP Server connected via stdio");
  } catch (error) {
    console.error("Error starting TestRail MCP Server:", error);
    process.exit(1);
  }
};

// Run the server
main();
```

Stdioãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€æ¨™æº–å…¥å‡ºåŠ›ï¼ˆstdin/stdoutï¼‰ã‚’ä½¿ã£ã¦é€šä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã¯CLIï¼ˆã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰ã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã‚„ã€ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨ç›´æ¥é€£æºã™ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚

ä»Šå›ã®å ´åˆ Claude Desktop ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€MCPã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã—ã¦ã„ã¾ã™ã€‚

```json
{
  "mcpServers": {
    "TestRail": {
      "type": "command",
      "command": "${YOUR_NODE_PATH}/node",
      "args": ["${YOUR_PROJECT_PATH}/mcp-testrail/dist/stdio.js"],
      "env": {
        "TESTRAIL_URL": "https://example.testrail.io",
        "TESTRAIL_USERNAME": "hoge@gmail.com",
        "TESTRAIL_API_KEY": "YOUR_API_KEY"
      }
    }
  }
}
```

### ç’°å¢ƒè¨­å®š

SSEã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€`mcp-testrail` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç›´ä¸‹ã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ TestRail ã«å¿…è¦ãªæƒ…å ±ã‚’æ¸¡ã›ã¾ã™ã€‚

```
# TestRail API connection settings
TESTRAIL_URL=https://your-instance.testrail.io
TESTRAIL_USERNAME=your-email@example.com
# æ©Ÿå¯†æƒ…å ±ãªã®ã§å…¬é–‹ã‚„ã‚³ãƒŸãƒƒãƒˆã‚’ã—ãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„
TESTRAIL_API_KEY=your-api-key 
```

Claude Desktop ã®å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã§ãã¾ã™ã€‚

```json
{
  "mcpServers": {
    "TestRail": {
      "type": "command",
      "command": "${YOUR_NODE_PATH}/node",
      "args": ["${YOUR_PROJECT_PATH}/mcp-testrail/dist/stdio.js"],
      // ã“ã“ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
      "env": {
        "TESTRAIL_URL": "https://example.testrail.io",
        "TESTRAIL_USERNAME": "hoge@gmail.com",
        "TESTRAIL_API_KEY": "YOUR_API_KEY"
      }
    }
  }
}
```

### TestRail ã¸ã®é€šä¿¡

TestRailã«ã¯[API](https://docs.testrail.techmatrix.jp/testrail/docs/702/api/)ãŒæº–å‚™ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€HTTPé€šä¿¡ã§å¿…è¦ãªæƒ…å ±ã‚’å–å¾—ã€ä½œæˆã€æ›´æ–°ã§ãã¾ã™ã€‚

è‡ªä½œã®ãƒ„ãƒ¼ãƒ«ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ã„ã¾ã™ã€‚

https://github.com/bun913/mcp-testrail/blob/8dac685e1bb2ce4a1721c3d508d34303ea441adc/src/client/api/projects.ts#L11-L26


## ä»Šå¾Œã®èª²é¡Œ

- ã¾ã å‹•ä½œãŒä¸å®‰å®šãªã“ã¨ãŒã‚ã‚Šã€æ€ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã§æ“ä½œã‚’å®Ÿè¡Œã—ã¦ãã‚Œãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™
    - å¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®è¨­å®šã®ä»•æ–¹ã‚„ã€MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰è¿”å´ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å½¢ãŒã‚ã¾ã‚Šã‚ˆããªã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“
- MCPã‚µãƒ¼ãƒãƒ¼è‡ªä½“ã®é€šä¿¡ãŒé€”åˆ‡ã‚Œã‚‹ã“ã¨ã‚‚çµæ§‹ã‚ã‚Šã€éƒ½åº¦ Cursor ã® MCPè¨­å®šã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™

## ã¾ã¨ã‚

- MCPã‚µãƒ¼ãƒãƒ¼ã‚’è‡ªä½œã—ã¦ã€TestRailã‚’è‡ªç„¶è¨€èªã§æ“ä½œã™ã‚‹ä»•çµ„ã¿ã‚’è‡ªä½œã—ã¦ã¿ã¾ã—ãŸ
- ä»–ã®MCPã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã™ã‚‹ã“ã¨ã§ã€TestRailã®æƒ…å ±ã‚’ä½¿ã£ã¦Playwrightã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è‡ªç„¶è¨€èªã§ä½œæˆã—ãŸã‚Šã€é€†ã«ä»Šã‚ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¨ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æƒ…å ±ã‹ã‚‰å¿…è¦ã¨ãªã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’TestRailä¸Šã«ä½œæˆã™ã‚‹ã“ã¨ãªã©ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™
- ã¨ã¯ã„ãˆã€ã¾ã å‹•ä½œãŒä¸å®‰å®šãªéƒ¨åˆ†ãŒã‚ã‚‹ã®ã§ã€è‡ªåˆ†ã§ã‚‚æ”¹è‰¯ã—ãŸã„ã¨æ€ã„ã¾ã™

å¥½ãã«Issueã‚„PRã‚’ä½œæˆã—ã¦ã„ãŸã ã„ã¦æ§‹ã„ã¾ã›ã‚“ã®ã§ã€ã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ã€‚

https://github.com/bun913/mcp-testrail/tree/main
